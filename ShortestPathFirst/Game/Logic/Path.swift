//
//  Path.swift
//  ShortestPathFirst
//
//  Created by Aaron Kovacs on 4/5/18.
//  Copyright Â© 2018 Aaron Kovacs. All rights reserved.
//

import Foundation

class Path {
    public let cumulativeWeight: Int
    public let node: Node
    public let previousPath: Path?
    public var requiredNodes: Int = 0
    
    var traversalTime: Int {
        get {
            return self.array.count
        }
    }
    
    var array: [Node] {
        var array: [Node] = [self.node]
        
        var iterativePath = self
        while let path = iterativePath.previousPath {
            array.append(path.node)
            
            iterativePath = path
        }
        
        return array
    }
    
    init(to node: Node, via connection: Connection? = nil, previousPath path: Path? = nil) {
        if
            let previousPath = path,
            let viaConnection = connection {
            self.cumulativeWeight = viaConnection.weight + previousPath.cumulativeWeight
        } else {
            self.cumulativeWeight = 0
        }
        
        self.node = node
        self.previousPath = path
    }
    
}
